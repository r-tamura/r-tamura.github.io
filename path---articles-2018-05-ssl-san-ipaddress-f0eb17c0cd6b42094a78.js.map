{"version":3,"sources":["webpack:///path---articles-2018-05-ssl-san-ipaddress-f0eb17c0cd6b42094a78.js","webpack:///./.cache/json/articles-2018-05-ssl-san-ipaddress.json"],"names":["webpackJsonp","359","module","exports","data","site","siteMetadata","siteUrl","title","authorName","authorDetail","githubId","twitterId","markdownRemark","html","frontmatter","tags","date","fields","slug","pathContext"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,MAAQC,cAAgBC,QAAA,mBAAAC,MAAA,SAAAC,WAAA,WAAAC,aAAA,yBAAAC,SAAA,WAAAC,UAAA,eAA8JC,gBAAmBC,KAAA,6pTAAu2RC,aAAw6BC,MAAA,iCAAAR,MAAA,cAAAS,KAAA,gBAAqFC,QAAWC,KAAA,0CAAgDC,aAAgBD,KAAA","file":"path---articles-2018-05-ssl-san-ipaddress-f0eb17c0cd6b42094a78.js","sourcesContent":["webpackJsonp([213123154633675],{\n\n/***/ 359:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"siteUrl\":\"https://rtam.xyz\",\"title\":\"Rの技術メモ\",\"authorName\":\"r-tamura\",\"authorDetail\":\"Web関連多めのソフトウェアエンジニアです。\",\"githubId\":\"r-tamura\",\"twitterId\":\"r_tamura30\"}},\"markdownRemark\":{\"html\":\"<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 51.935788479697834%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAChElEQVQozx2TyW7TUBSG/QBILEBFFAQkgdLQzMEZiWtnNJmcxJndxknsDB3UCaKWFkFhB+IJeNmPK3Z3ce4/nf9I53aNjWtws+qw6OWppIPIfg+RnVdEdz3IgbekQn56hTSrtoapxalmItiDAu68zrnT4MY1ObV0ziY1pE9ui+tVl/WwzOXUEIAhAt7npIKvefvyKY10mEUlw6KQ4mrSppeXSQoiU5eZWCrLjsp0P85KiOmX4khXTof1qMKsnuVI/8BHAeB9toXn6WO2Hj6gFHrDeX2fdSXHQInRzQZRBJmhyaxGJYygj3E+zpXT/i9Ksowsp+MybluhuufBysXwbm/he/aETHiPajLEUVXhtJFnKGzbgrSZDpALehnkIjQiXq6XJj8/T7m/mCAtZnXmQ41Fv0AnF2KU9JPZ8xF97eHu6py11eP3Zs33Y5s/txf8/XXPtdPFSOzSiO8IdRFulm028yaXYh/StJtnLqS7h01ss0Aj6qGdCeDffkSvpLAydTaHBs7HHN+WY34cH3AmrDl6imrYw0RPsO5rzBppFl0NaTko/vd+NBJLcTv01Bh2KYkusiyHfRwUZGZFmZHIbq6n2dhNjoSIqXhbYnbdK+KaKmNB0C8nkE4Oqtyejrg9HvJVZHBiG7i1LEuzTEuRWTZVjkVdFjWFSSnF3bzDF1ETt66wNBTcboVDQ6NVTNLWYkjuQMMSC3GFbccqMWxmMFI74kNO9LLO5ajGrJximIszLWc5MfLY2nuqwReMizGKCT9KzIv63kdLjSI5VpFRX2XSFz0yMlSUAK39MNOSzELPcqgKIAEwyAQxE3u0E+9Q32xTi/rEMYy5dAbUxHwlvYtVTfEPJpV3PQcQSmkAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"1.1.1.1_web\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/1.1.1.1_web-c0f6796e1f605dccbcc075c30c02a16b-83a8b.png\\\"\\n        srcset=\\\"/static/1.1.1.1_web-c0f6796e1f605dccbcc075c30c02a16b-8992e.png 163w,\\n/static/1.1.1.1_web-c0f6796e1f605dccbcc075c30c02a16b-ae0a7.png 325w,\\n/static/1.1.1.1_web-c0f6796e1f605dccbcc075c30c02a16b-83a8b.png 650w,\\n/static/1.1.1.1_web-c0f6796e1f605dccbcc075c30c02a16b-50453.png 975w,\\n/static/1.1.1.1_web-c0f6796e1f605dccbcc075c30c02a16b-8b09e.png 1059w\\\"\\n        sizes=\\\"(max-width: 650px) 100vw, 650px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>2018/4/1からCDNのCloudflareがIPアドレス<code>1.1.1.1</code>をDNSサーバとして運用を開始した。\\n<code>1.1.1.1</code>ではWebサーバも公開されており、アクセスしてみた際にドメインではなくで <a href=\\\"https://1.1.1.1\\\">https://1.1.1.1</a> という<strong>IPアドレスでSSL接続していた</strong>ことに疑問を覚えたので仕組みを調べてみた。</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 279px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 13.261648745519713%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAg0lEQVQI132MwQ6CMBBE+f9fNBpB2912KW0BEz09oeHARSd5mdnJZDsVJWjAomEhIiKIF+KW9y6o4pzDe48/fN+0+8hnuuvYM4QHmpQhOl6fN8uSubg7N+nJOTHa/rwwpcQyV/6pi5Ohpg2xwFQKtRZ8FAZ5YmaUrcu5NJ9rZV3Xn3wBwJfio7QHz90AAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"url\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/url-8329cec74d5dca11ddfedecae489e414-5222b.png\\\"\\n        srcset=\\\"/static/url-8329cec74d5dca11ddfedecae489e414-c4632.png 163w,\\n/static/url-8329cec74d5dca11ddfedecae489e414-5222b.png 279w\\\"\\n        sizes=\\\"(max-width: 279px) 100vw, 279px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<h1>証明書の中身を確認</h1>\\n<p>CN, SANで<code>1.1.1.1</code>という値が指定されているはずと考えられるので、まずはブラウザから証明書の中身を確認してみる。</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 61.79401993355482%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACDElEQVQoz4VTyXKbUBDk/78oSeWSQ3JyLiljC8QidgESy2OJA0Kd6ZFJ+ZapevUWtXpmehrr8PqCJEmR5wWyLMf5XKIsS9nP+sa77/t4sZ8RRTGqqtLf6rrW9biXstfwPA9WGJ4wDAOyNFUiYwa0bYtxHLGuK+53oCgKJR2GEangSND3RnAdxmnGsqzYtrvirCLPMU+TEkyydx1BE263m5DdIXyPDrJMcAPGoceftwmmbyWBnH9PwH3TxFmawQp8D97RRRInWCVTJVXyz1VZaQIGW/U9H59+xPj8NOC7A3x56vD1Z4tvz29wckm8bQiDENZB+nbcI1zHxTzPQpbDPTiSxEPbtEp4lHMQHGG/HhHEFbpxQ5SIZmGOojYY5kVa3uC6Liw/DGDbtorKuF4uWm0hA9krDPwAXuBL67H8dpJqVjSXCqmck+gkMph/nchQQsRxjFoIKbQxRgCjaGRU10UGk4o24SnUJGmS6TsX8RwoEy/LogOzWKbzekAcRaobCef3obANBm1CDc/FWRL1+q4De18fcVYsZbJN+okDuYi3mutVLbMHgZThf1GKnaxduz1oGRq2l0qaptE9SRL1KGOvju9MRJsRx51eti5S3Q5UQtHmKhVypz6cPLVhEgbJGNSNRA+ckbs4RDxtEcyvo+t6XTzvZBSdlbliK1bJL+Ujjnfiro1RO/2yPfwFxtqKyYVU7dEAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"san.png\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/san-52e3606eea7346562ba3b5a92b5ec8a2-83a8b.png\\\"\\n        srcset=\\\"/static/san-52e3606eea7346562ba3b5a92b5ec8a2-8992e.png 163w,\\n/static/san-52e3606eea7346562ba3b5a92b5ec8a2-ae0a7.png 325w,\\n/static/san-52e3606eea7346562ba3b5a92b5ec8a2-83a8b.png 650w,\\n/static/san-52e3606eea7346562ba3b5a92b5ec8a2-50453.png 975w,\\n/static/san-52e3606eea7346562ba3b5a92b5ec8a2-215a8.png 1204w\\\"\\n        sizes=\\\"(max-width: 650px) 100vw, 650px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>SANのところで<code>IP Address=1.1.1.1</code>という項目があり、他にも<code>1.0.0.1</code>やIPv6形式のアドレスもあることがわかる。\\n確かに証明書の中にはIPアドレスで指定されているようだ。そこで、実際に証明書の仕様を確認してみる。</p>\\n<h1>RFC仕様</h1>\\n<p><a href=\\\"\\\">RFC5280</a>のSANの構造を見てみると以下のようになっている。</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>  SubjectAltName ::= GeneralNames\\n\\n  GeneralNames ::= SEQUENCE SIZE (1..MAX) OF GeneralName\\n\\n  GeneralName ::= CHOICE {  \\n    otherName                       [0]     OtherName,  \\n    rfc822Name                      [1]     IA5String,  \\n    dNSName                         [2]     IA5String,  \\n    x400Address                     [3]     ORAddress,  \\n    directoryName                   [4]     Name,  \\n    ediPartyName                    [5]     EDIPartyName,  \\n    uniformResourceIdentifier       [6]     IA5String,  \\n    iPAddress                       [7]     OCTET STRING,  \\n    registeredID                    [8]     OBJECT IDENTIFIER \\n  }  </code></pre>\\n      </div>\\n<p>SANには[7]で<strong>IPアドレス</strong>も指定できることがわかる。他にもいろいろなものが指定できることも確認できる。仕様がわかったので、次はパケットの中身をみてみる。</p>\\n<h1>パケットキャプチャをしてみる</h1>\\n<p>WiresharkでSSLハンドシェイク時のパケットをキャプチャし、サーバからのレスポンスCertificateのSAN部分のバイナリデータとWireshark上で見える内容を確認してみる。</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 609px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 102.79146141215105%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAD0klEQVQ4y32USXPbRhCF+Y9VysWKE5cWH3Pzzbdck7NsSa6SpaRSkiNuIEiQBMAFGwkC3Elwkbi8vB5atpKKNFVdAAn0hzfdryc1HA7R6/XQ7/cRxzEq1QrS6TTK5TJKpSKq/J3P5ZDP5/Dl9oZXDb7nwmk20Ww0UKvV0Ol0MJslOHj1Cin8Z61WD3BdD1a9CbvuoNsfwvVbaHViPKy3WD6skcyXGE9njDn6wzGWq43KPTw+2QE3mw222y02Eps14sEIutlAWiujHsQwrCa0so2a30E4SBCPFxgvt0hWUDFabLAk5/Wbox1QYI8haz6bwbQJzBfhBB3U3QB6xUbDa8Nrx/zgBNPlCgvC5g9bzO4piHk/H74A1Gwf1zkTWTuE1ujirtpCNUxQ792jNQP8CeCNtwzAHW0Q3QM/vH4B2Ap82JaJiAXvxhFcx8EsmWLNGu/W9vt1u6vh8fEzQOmY03TYZQMhgfVaHbYt3YyQ8GPL5RLf84D1Zgc8OvofoMSMSQ4VlY2yAopFbNojaLHbjOl0SjesvkE3zwEf1yxJ4PsePVlVQNdpwrJt2slFm8DxhE2ZJi8DH+0jX5Ya+h6BFQLDEB5BNoGe7yOKOhgMhphMps8Dv/mQV5kYSRT3y/YE4BBoWZYCJWzMaDRS783nC5W3Xq//DXy61usVt+sT4qHbjdHlWC4WC4JmvM4JmfM+gYys3D9dJyfHSHmerxrgOO7XcGCaJmfYRIOz2mRDRPHTkA8GQQuSK88bjDDsYH9/HylJKhQK6kAoFHTouo5MJotisQSDXdb5n6ZpyGSzfFZEjgdFnTm9Xp9lsOEHgaqvcA4OfkQqiiKqqcKiKnnBskxVr8bXk6ReFw9aqkGWVds1in6UMkjuYDCg2gBR3KWxuWXZolaggnRGqRK1mlZAifdyhIniXC6LXOYOTcuAbeQRBh6BS+UA8adtVjGK2ziWpoTtNv+0WbeqmoaaujeVMjnvJKFOhX9yrn+9auL9mYF0rY/xoEdv1hCFLaR1C6daFz+9OURK5Op6AdlsjrXLQMvn1SEq6qQUorpc0nH+VwHvTsv45fc0/ijS3MMeqqYF323i6jaP326CHVDqUGGybNUwDIIMQoq7urKWAjaZWDMrCBoVOFYRUdtXdpJytbhDmaRxr00fEijHfokAqZWA8lSYplIZO/mAdFieFdjhcoXHWS7PmW7T3EP6tKu8OOEo9voD+vAtUjc3Nzg/P8eni0+4/PyZ1wv+vsDV1TUuLy9x9vEjzs7OVFzw2YcPp7i9/aJEXF9f4++7O2U5EbO3t4d/AO3P8itz9xn4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"captured_san.png\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/captured_san-acfc1b249fe07c5e6342a95b3413d600-d6c9d.png\\\"\\n        srcset=\\\"/static/captured_san-acfc1b249fe07c5e6342a95b3413d600-df0dd.png 163w,\\n/static/captured_san-acfc1b249fe07c5e6342a95b3413d600-239af.png 325w,\\n/static/captured_san-acfc1b249fe07c5e6342a95b3413d600-d6c9d.png 609w\\\"\\n        sizes=\\\"(max-width: 609px) 100vw, 609px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>バイナリ部分の<code>87 04</code>が何を意味しているはわからないが、IPアドレスがオクテット形式でデーター多として見える。</p>\\n<h1>まとめ</h1>\\n<p>SSL証明書のサブジェクトにIPアドレスが使えることが分かった。今回はRFCを読み、実際にパケットをキャプチャしてみることで仕組みを理解することができた。インターネット上の仕様はいろいろなサイトで解説されているが、全てがRFCを元としているので、わからないことがあったら今後はRFCまで調査するように心がけていきたい。</p>\\n<h1>参考</h1>\\n<ul>\\n<li><a href=\\\"https://blog.cloudflare.com/announcing-1111/\\\">Announcing 1.1.1.1: the fastest, privacy-first consumer DNS service</a></li>\\n</ul>\\n<p><a href=\\\"\\\">rfc5280</a></p>\",\"frontmatter\":{\"tags\":[\"ssl\",\"x509\",\"cloudflare\",\"cdn\"],\"title\":\"1.1.1.1のSSL\",\"date\":\"12 May, 2018\"},\"fields\":{\"slug\":\"/articles/2018/05/ssl-san-ipaddress/\"}}},\"pathContext\":{\"slug\":\"/articles/2018/05/ssl-san-ipaddress/\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---articles-2018-05-ssl-san-ipaddress-f0eb17c0cd6b42094a78.js","module.exports = {\"data\":{\"site\":{\"siteMetadata\":{\"siteUrl\":\"https://rtam.xyz\",\"title\":\"Rの技術メモ\",\"authorName\":\"r-tamura\",\"authorDetail\":\"Web関連多めのソフトウェアエンジニアです。\",\"githubId\":\"r-tamura\",\"twitterId\":\"r_tamura30\"}},\"markdownRemark\":{\"html\":\"<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 51.935788479697834%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAChElEQVQozx2TyW7TUBSG/QBILEBFFAQkgdLQzMEZiWtnNJmcxJndxknsDB3UCaKWFkFhB+IJeNmPK3Z3ce4/nf9I53aNjWtws+qw6OWppIPIfg+RnVdEdz3IgbekQn56hTSrtoapxalmItiDAu68zrnT4MY1ObV0ziY1pE9ui+tVl/WwzOXUEIAhAt7npIKvefvyKY10mEUlw6KQ4mrSppeXSQoiU5eZWCrLjsp0P85KiOmX4khXTof1qMKsnuVI/8BHAeB9toXn6WO2Hj6gFHrDeX2fdSXHQInRzQZRBJmhyaxGJYygj3E+zpXT/i9Ksowsp+MybluhuufBysXwbm/he/aETHiPajLEUVXhtJFnKGzbgrSZDpALehnkIjQiXq6XJj8/T7m/mCAtZnXmQ41Fv0AnF2KU9JPZ8xF97eHu6py11eP3Zs33Y5s/txf8/XXPtdPFSOzSiO8IdRFulm028yaXYh/StJtnLqS7h01ss0Aj6qGdCeDffkSvpLAydTaHBs7HHN+WY34cH3AmrDl6imrYw0RPsO5rzBppFl0NaTko/vd+NBJLcTv01Bh2KYkusiyHfRwUZGZFmZHIbq6n2dhNjoSIqXhbYnbdK+KaKmNB0C8nkE4Oqtyejrg9HvJVZHBiG7i1LEuzTEuRWTZVjkVdFjWFSSnF3bzDF1ETt66wNBTcboVDQ6NVTNLWYkjuQMMSC3GFbccqMWxmMFI74kNO9LLO5ajGrJximIszLWc5MfLY2nuqwReMizGKCT9KzIv63kdLjSI5VpFRX2XSFz0yMlSUAK39MNOSzELPcqgKIAEwyAQxE3u0E+9Q32xTi/rEMYy5dAbUxHwlvYtVTfEPJpV3PQcQSmkAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"1.1.1.1_web\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/1.1.1.1_web-c0f6796e1f605dccbcc075c30c02a16b-83a8b.png\\\"\\n        srcset=\\\"/static/1.1.1.1_web-c0f6796e1f605dccbcc075c30c02a16b-8992e.png 163w,\\n/static/1.1.1.1_web-c0f6796e1f605dccbcc075c30c02a16b-ae0a7.png 325w,\\n/static/1.1.1.1_web-c0f6796e1f605dccbcc075c30c02a16b-83a8b.png 650w,\\n/static/1.1.1.1_web-c0f6796e1f605dccbcc075c30c02a16b-50453.png 975w,\\n/static/1.1.1.1_web-c0f6796e1f605dccbcc075c30c02a16b-8b09e.png 1059w\\\"\\n        sizes=\\\"(max-width: 650px) 100vw, 650px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>2018/4/1からCDNのCloudflareがIPアドレス<code>1.1.1.1</code>をDNSサーバとして運用を開始した。\\n<code>1.1.1.1</code>ではWebサーバも公開されており、アクセスしてみた際にドメインではなくで <a href=\\\"https://1.1.1.1\\\">https://1.1.1.1</a> という<strong>IPアドレスでSSL接続していた</strong>ことに疑問を覚えたので仕組みを調べてみた。</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 279px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 13.261648745519713%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAg0lEQVQI132MwQ6CMBBE+f9fNBpB2912KW0BEz09oeHARSd5mdnJZDsVJWjAomEhIiKIF+KW9y6o4pzDe48/fN+0+8hnuuvYM4QHmpQhOl6fN8uSubg7N+nJOTHa/rwwpcQyV/6pi5Ohpg2xwFQKtRZ8FAZ5YmaUrcu5NJ9rZV3Xn3wBwJfio7QHz90AAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"url\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/url-8329cec74d5dca11ddfedecae489e414-5222b.png\\\"\\n        srcset=\\\"/static/url-8329cec74d5dca11ddfedecae489e414-c4632.png 163w,\\n/static/url-8329cec74d5dca11ddfedecae489e414-5222b.png 279w\\\"\\n        sizes=\\\"(max-width: 279px) 100vw, 279px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<h1>証明書の中身を確認</h1>\\n<p>CN, SANで<code>1.1.1.1</code>という値が指定されているはずと考えられるので、まずはブラウザから証明書の中身を確認してみる。</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 650px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 61.79401993355482%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACDElEQVQoz4VTyXKbUBDk/78oSeWSQ3JyLiljC8QidgESy2OJA0Kd6ZFJ+ZapevUWtXpmehrr8PqCJEmR5wWyLMf5XKIsS9nP+sa77/t4sZ8RRTGqqtLf6rrW9biXstfwPA9WGJ4wDAOyNFUiYwa0bYtxHLGuK+53oCgKJR2GEangSND3RnAdxmnGsqzYtrvirCLPMU+TEkyydx1BE263m5DdIXyPDrJMcAPGoceftwmmbyWBnH9PwH3TxFmawQp8D97RRRInWCVTJVXyz1VZaQIGW/U9H59+xPj8NOC7A3x56vD1Z4tvz29wckm8bQiDENZB+nbcI1zHxTzPQpbDPTiSxEPbtEp4lHMQHGG/HhHEFbpxQ5SIZmGOojYY5kVa3uC6Liw/DGDbtorKuF4uWm0hA9krDPwAXuBL67H8dpJqVjSXCqmck+gkMph/nchQQsRxjFoIKbQxRgCjaGRU10UGk4o24SnUJGmS6TsX8RwoEy/LogOzWKbzekAcRaobCef3obANBm1CDc/FWRL1+q4De18fcVYsZbJN+okDuYi3mutVLbMHgZThf1GKnaxduz1oGRq2l0qaptE9SRL1KGOvju9MRJsRx51eti5S3Q5UQtHmKhVypz6cPLVhEgbJGNSNRA+ckbs4RDxtEcyvo+t6XTzvZBSdlbliK1bJL+Ujjnfiro1RO/2yPfwFxtqKyYVU7dEAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"san.png\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/san-52e3606eea7346562ba3b5a92b5ec8a2-83a8b.png\\\"\\n        srcset=\\\"/static/san-52e3606eea7346562ba3b5a92b5ec8a2-8992e.png 163w,\\n/static/san-52e3606eea7346562ba3b5a92b5ec8a2-ae0a7.png 325w,\\n/static/san-52e3606eea7346562ba3b5a92b5ec8a2-83a8b.png 650w,\\n/static/san-52e3606eea7346562ba3b5a92b5ec8a2-50453.png 975w,\\n/static/san-52e3606eea7346562ba3b5a92b5ec8a2-215a8.png 1204w\\\"\\n        sizes=\\\"(max-width: 650px) 100vw, 650px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>SANのところで<code>IP Address=1.1.1.1</code>という項目があり、他にも<code>1.0.0.1</code>やIPv6形式のアドレスもあることがわかる。\\n確かに証明書の中にはIPアドレスで指定されているようだ。そこで、実際に証明書の仕様を確認してみる。</p>\\n<h1>RFC仕様</h1>\\n<p><a href=\\\"\\\">RFC5280</a>のSANの構造を見てみると以下のようになっている。</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>  SubjectAltName ::= GeneralNames\\n\\n  GeneralNames ::= SEQUENCE SIZE (1..MAX) OF GeneralName\\n\\n  GeneralName ::= CHOICE {  \\n    otherName                       [0]     OtherName,  \\n    rfc822Name                      [1]     IA5String,  \\n    dNSName                         [2]     IA5String,  \\n    x400Address                     [3]     ORAddress,  \\n    directoryName                   [4]     Name,  \\n    ediPartyName                    [5]     EDIPartyName,  \\n    uniformResourceIdentifier       [6]     IA5String,  \\n    iPAddress                       [7]     OCTET STRING,  \\n    registeredID                    [8]     OBJECT IDENTIFIER \\n  }  </code></pre>\\n      </div>\\n<p>SANには[7]で<strong>IPアドレス</strong>も指定できることがわかる。他にもいろいろなものが指定できることも確認できる。仕様がわかったので、次はパケットの中身をみてみる。</p>\\n<h1>パケットキャプチャをしてみる</h1>\\n<p>WiresharkでSSLハンドシェイク時のパケットをキャプチャし、サーバからのレスポンスCertificateのSAN部分のバイナリデータとWireshark上で見える内容を確認してみる。</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 609px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 102.79146141215105%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAD0klEQVQ4y32USXPbRhCF+Y9VysWKE5cWH3Pzzbdck7NsSa6SpaRSkiNuIEiQBMAFGwkC3Elwkbi8vB5atpKKNFVdAAn0hzfdryc1HA7R6/XQ7/cRxzEq1QrS6TTK5TJKpSKq/J3P5ZDP5/Dl9oZXDb7nwmk20Ww0UKvV0Ol0MJslOHj1Cin8Z61WD3BdD1a9CbvuoNsfwvVbaHViPKy3WD6skcyXGE9njDn6wzGWq43KPTw+2QE3mw222y02Eps14sEIutlAWiujHsQwrCa0so2a30E4SBCPFxgvt0hWUDFabLAk5/Wbox1QYI8haz6bwbQJzBfhBB3U3QB6xUbDa8Nrx/zgBNPlCgvC5g9bzO4piHk/H74A1Gwf1zkTWTuE1ujirtpCNUxQ792jNQP8CeCNtwzAHW0Q3QM/vH4B2Ap82JaJiAXvxhFcx8EsmWLNGu/W9vt1u6vh8fEzQOmY03TYZQMhgfVaHbYt3YyQ8GPL5RLf84D1Zgc8OvofoMSMSQ4VlY2yAopFbNojaLHbjOl0SjesvkE3zwEf1yxJ4PsePVlVQNdpwrJt2slFm8DxhE2ZJi8DH+0jX5Ya+h6BFQLDEB5BNoGe7yOKOhgMhphMps8Dv/mQV5kYSRT3y/YE4BBoWZYCJWzMaDRS783nC5W3Xq//DXy61usVt+sT4qHbjdHlWC4WC4JmvM4JmfM+gYys3D9dJyfHSHmerxrgOO7XcGCaJmfYRIOz2mRDRPHTkA8GQQuSK88bjDDsYH9/HylJKhQK6kAoFHTouo5MJotisQSDXdb5n6ZpyGSzfFZEjgdFnTm9Xp9lsOEHgaqvcA4OfkQqiiKqqcKiKnnBskxVr8bXk6ReFw9aqkGWVds1in6UMkjuYDCg2gBR3KWxuWXZolaggnRGqRK1mlZAifdyhIniXC6LXOYOTcuAbeQRBh6BS+UA8adtVjGK2ziWpoTtNv+0WbeqmoaaujeVMjnvJKFOhX9yrn+9auL9mYF0rY/xoEdv1hCFLaR1C6daFz+9OURK5Op6AdlsjrXLQMvn1SEq6qQUorpc0nH+VwHvTsv45fc0/ijS3MMeqqYF323i6jaP326CHVDqUGGybNUwDIIMQoq7urKWAjaZWDMrCBoVOFYRUdtXdpJytbhDmaRxr00fEijHfokAqZWA8lSYplIZO/mAdFieFdjhcoXHWS7PmW7T3EP6tKu8OOEo9voD+vAtUjc3Nzg/P8eni0+4/PyZ1wv+vsDV1TUuLy9x9vEjzs7OVFzw2YcPp7i9/aJEXF9f4++7O2U5EbO3t4d/AO3P8itz9xn4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"captured_san.png\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/captured_san-acfc1b249fe07c5e6342a95b3413d600-d6c9d.png\\\"\\n        srcset=\\\"/static/captured_san-acfc1b249fe07c5e6342a95b3413d600-df0dd.png 163w,\\n/static/captured_san-acfc1b249fe07c5e6342a95b3413d600-239af.png 325w,\\n/static/captured_san-acfc1b249fe07c5e6342a95b3413d600-d6c9d.png 609w\\\"\\n        sizes=\\\"(max-width: 609px) 100vw, 609px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>バイナリ部分の<code>87 04</code>が何を意味しているはわからないが、IPアドレスがオクテット形式でデーター多として見える。</p>\\n<h1>まとめ</h1>\\n<p>SSL証明書のサブジェクトにIPアドレスが使えることが分かった。今回はRFCを読み、実際にパケットをキャプチャしてみることで仕組みを理解することができた。インターネット上の仕様はいろいろなサイトで解説されているが、全てがRFCを元としているので、わからないことがあったら今後はRFCまで調査するように心がけていきたい。</p>\\n<h1>参考</h1>\\n<ul>\\n<li><a href=\\\"https://blog.cloudflare.com/announcing-1111/\\\">Announcing 1.1.1.1: the fastest, privacy-first consumer DNS service</a></li>\\n</ul>\\n<p><a href=\\\"\\\">rfc5280</a></p>\",\"frontmatter\":{\"tags\":[\"ssl\",\"x509\",\"cloudflare\",\"cdn\"],\"title\":\"1.1.1.1のSSL\",\"date\":\"12 May, 2018\"},\"fields\":{\"slug\":\"/articles/2018/05/ssl-san-ipaddress/\"}}},\"pathContext\":{\"slug\":\"/articles/2018/05/ssl-san-ipaddress/\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/articles-2018-05-ssl-san-ipaddress.json\n// module id = 359\n// module chunks = 213123154633675"],"sourceRoot":""}